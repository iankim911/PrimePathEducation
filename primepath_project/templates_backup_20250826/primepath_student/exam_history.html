{% extends 'student_base.html' %}

{% block title %}Exam History - PrimePath Student Portal{% endblock %}

{% block extra_styles %}
<style>
    .exam-history-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    
    .exam-history-table th {
        background-color: #2E7D32;
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: 500;
    }
    
    .exam-history-table td {
        padding: 12px;
        border-bottom: 1px solid #eee;
    }
    
    .exam-history-table tr:hover {
        background-color: #f5f5f5;
    }
    
    .status-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 500;
    }
    
    .status-completed {
        background-color: #C8E6C9;
        color: #2E7D32;
    }
    
    .status-in-progress {
        background-color: #FFF9C4;
        color: #F57C00;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .stat-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: #2E7D32;
    }
    
    .stat-label {
        color: #666;
        margin-top: 5px;
    }
    
    @media (max-width: 768px) {
        .exam-history-table {
            font-size: 14px;
        }
        
        .exam-history-table th,
        .exam-history-table td {
            padding: 8px;
        }
        
        .stats-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="card">
    <h2>Exam History</h2>
    <p style="color: #666;">View your past exam attempts and scores</p>
</div>

<!-- Statistics Overview -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ total_exams|default:0 }}</div>
        <div class="stat-label">Total Exams Taken</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">
            {% if exam_history %}
                {{ exam_history|length }}
            {% else %}
                0
            {% endif %}
        </div>
        <div class="stat-label">Completed Exams</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">--</div>
        <div class="stat-label">Average Score</div>
    </div>
</div>

<!-- Exam History Table -->
<div class="card">
    <h3 style="color: #2E7D32; margin-bottom: 20px;">Recent Exams</h3>
    
    {% if exam_history %}
    <div style="overflow-x: auto;">
        <table class="exam-history-table">
            <thead>
                <tr>
                    <th>Exam Name</th>
                    <th>Class</th>
                    <th>Date Taken</th>
                    <th>Score</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for exam in exam_history %}
                <tr>
                    <td>{{ exam.exam_name }}</td>
                    <td>{{ exam.class_code }}</td>
                    <td>
                        {% if exam.start_time %}
                            {{ exam.start_time|date:"M d, Y" }}
                        {% else %}
                            --
                        {% endif %}
                    </td>
                    <td>
                        {% if exam.score is not None %}
                            {{ exam.score }}/{{ exam.total_questions }}
                        {% else %}
                            --
                        {% endif %}
                    </td>
                    <td>
                        <span class="status-badge {% if exam.is_completed %}status-completed{% else %}status-in-progress{% endif %}">
                            {{ exam.status }}
                        </span>
                    </td>
                    <td>
                        <a href="#" onclick="alert('Detailed view coming soon'); return false;" 
                           style="color: #2E7D32; text-decoration: none;">
                            View Details â†’
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px; background-color: #f5f5f5; border-radius: 8px;">
        <p style="color: #666; font-size: 18px; margin-bottom: 10px;">No exam history yet</p>
        <p style="color: #999;">Your completed exams will appear here</p>
    </div>
    {% endif %}
</div>

<!-- Placeholder for Future Features -->
<div class="card" style="margin-top: 30px; background-color: #F8F9FA;">
    <h3 style="color: #2E7D32; margin-bottom: 10px;">Coming Soon</h3>
    <ul style="color: #666; line-height: 1.8;">
        <li>Detailed exam analytics and performance trends</li>
        <li>Download exam reports and certificates</li>
        <li>View incorrect answers and explanations</li>
        <li>Compare scores with class average</li>
    </ul>
</div>
{% endblock %}