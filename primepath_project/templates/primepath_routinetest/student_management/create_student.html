{% extends 'routinetest_base.html' %}

{% block title %}Create Student Account{% endblock %}

{% block content %}
<div class="container">
    <div class="card" style="max-width: 600px; margin: 0 auto;">
        <h2>Create New Student Account</h2>
        
        {% if errors %}
        <div style="background-color: #FFCDD2; color: #C62828; padding: 10px; border-radius: 4px; margin-bottom: 20px;">
            <ul style="margin: 0; padding-left: 20px;">
                {% for error in errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <form method="post">
            {% csrf_token %}
            
            <div style="margin-bottom: 20px;">
                <label for="phone_number" style="display: block; margin-bottom: 5px; font-weight: 500;">
                    Phone Number *
                </label>
                <input type="tel" id="phone_number" name="phone_number" 
                       value="{{ form_data.phone_number|default:'' }}"
                       placeholder="e.g., 01012345678"
                       style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                       required>
                <small style="color: #666;">Student will use this to log in</small>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="student_id" style="display: block; margin-bottom: 5px; font-weight: 500;">
                    Student ID (Optional)
                </label>
                <input type="text" id="student_id" name="student_id" 
                       value="{{ form_data.student_id|default:'' }}"
                       placeholder="Leave blank to auto-generate"
                       style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                <small style="color: #666;">Will be auto-generated if left blank</small>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="first_name" style="display: block; margin-bottom: 5px; font-weight: 500;">
                    First Name *
                </label>
                <input type="text" id="first_name" name="first_name" 
                       value="{{ form_data.first_name|default:'' }}"
                       style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                       required>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="last_name" style="display: block; margin-bottom: 5px; font-weight: 500;">
                    Last Name *
                </label>
                <input type="text" id="last_name" name="last_name" 
                       value="{{ form_data.last_name|default:'' }}"
                       style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                       required>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="password" style="display: block; margin-bottom: 5px; font-weight: 500;">
                    Password *
                </label>
                <input type="password" id="password" name="password" 
                       style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                       required>
                <small style="color: #666;">At least 8 characters</small>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">
                    Assign to Classes (Optional)
                </label>
                <div style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
                    {% for code, name in all_classes %}
                    <label style="display: block; margin-bottom: 5px; cursor: pointer;">
                        <input type="checkbox" name="class_codes" value="{{ code }}" 
                               {% if code in form_data.class_codes %}checked{% endif %}
                               style="margin-right: 8px;">
                        {{ name }}
                    </label>
                    {% endfor %}
                </div>
                <small style="color: #666;">Select classes to automatically enroll the student</small>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn btn-primary" 
                        style="background-color: #00A65E; border: none; color: white; 
                               padding: 10px 20px; border-radius: 4px; cursor: pointer; flex: 1;">
                    Create Student Account
                </button>
                <a href="{% url 'primepath_routinetest:classes_exams' %}" class="btn" 
                   style="background-color: #666; color: white; padding: 10px 20px; 
                          text-decoration: none; border-radius: 4px; text-align: center; flex: 1;">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}